Type of code: Mathematical Calculation
Purpose of the code: To calculate the number of shares to be burned for transferring a given amount of underlying assets.
Working process: The unitsToShares function calculates the number of shares to mint or burn based on the total perceived value (TVL) and the current balance of the protocol. It first calculates the total value of the protocol by summing up the IBT, OVL, and ETH values. Then, it determines the percentage of shares relative to the total protocol value, which represents a single share's value. This percentage is multiplied by the desired token units to calculate the equivalent share value. Finally, this calculated share value is divided by the total value of 1e18 shares to get the final required share value.