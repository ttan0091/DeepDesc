Type of vulnerability: Invalid classification in Consensys' ethers
Cause of vulnerability: mixture of constant getters with statechanging functions
How the vulnerability occurred: The getUpgradeState() function was marked as constant, leading to its misclassification as a constant, even though it can change its response based on the value of upgradeMaster. This misclassification prevents the function from being added to the constant (or view) method list, and as a result, ethers considers this function as a message function.