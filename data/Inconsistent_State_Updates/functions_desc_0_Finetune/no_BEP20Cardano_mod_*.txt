Type of vulnerability: Denial of Service (DoS) from revert loops
Cause of vulnerability: The function fails to return the correct error code when certain require conditions are not met, leading to the calling function incorrectly assuming success and getting trapped in a revert loop.
Working process of the code: When the fmtParams argument in the format function is not empty, the function getFeeRate in the FEES chainpath is called. If getFeeRate returns 0, mod will be called with b as 0, causing a revert without the correct error code. This leads the function to incorrectly assume success, causing it to get stuck in a revert loop.