Type of request: Code Explanation
Code to be explained: The getAmountsOut function in UniswapV2Library
Request: Provide a detailed explanation of how the getAmountsOut function works in the Uniswap V2 library, focusing on its calculation of token swap amounts.