Type of contract: Plutus Staking NFT Contract
Purpose of contract: To provide functionality for staking and unstaking FLOKIS from a wallet to an NFT and back to a wallet.
Working process: The contract holds a state variable referrerAddress mapping each staker's address to a referrer's address. The public function setReferrerAddress allows setting the referrer for a given staker. The setReferrerAddress function restricts which addresses can be used as the referrer. An address can only be set as a referrer for one staker, and the referrer must be a staker who already has FLOKIS staked in the contract. If the referrer is 0, the function sets the referrer to the caller.
When an address is set as a referrer, it can claim a commission reward using the claimCommissionRewards function, which calculates the commission based on the reward amount and the commission rate.
The collectRewards function converts the staker NFT into FLOKIS to distribution reward tokens according to the standard.
The withdrawUnstaked function can only be called when a user is not staking or withdrawing, to prevent race conditions.