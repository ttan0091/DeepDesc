Type of vulnerability: Precision Damage
Cause of vulnerability: Incorrect handling of token decimals during the underlying token initialisation
Explanation of vulnerability: When the underlying token is being initialised, the decimal value is not processed and does not adjust the state variable UNDERLYING_DECIMALS. This causes inconsistencies in precision handling, as the value is assumed to be at the default of 18 decimal places instead of the actual underlying decimals.
Impact of vulnerability: The vulnerability allows for precision damage during operations that involve underlying token supply and control, leading to skewed results and potential financial loss for users and the protocol.
Fix for vulnerability: The OpenOraclePriceConfig contract should call the oleMaster.update function, passing the symbolic name of the underlying in the OLE list to retrieve the actual decimals. This updated decimal value should then be assigned to the UNDERLYING_DECIMALS state variable, ensuring consistent precision handling.