Type of contract: DePay Protocol Router
Purpose: To route and swap value, enabling users to send payments and make highlevel swaps.
Working Process: The contract contains various methods, with the transfer function serving as a crucial point where the distribution of the payment and fees occurs. This transfer function is overriden by _transfer, enabling custom logic for the distributor fee transfer. The custom logic involves the calculation of the distributor fees based on the Deposits of accounts. The Deposits are updated during the trigger function, which is called internally or by the VM balance callback. The trigger function updates the balance by redeeming the Deposits in the DepayToken contract. The redeem function in DepayToken updates Deposits. Balances are used for daily payments. The Deposits are not used for daily payments. The redeem function also burns Deprecated Tokens, affecting Totals, and Deposits are carried next week.