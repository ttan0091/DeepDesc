[H-07] Risk users are required to payout if the price of the pegged asset goes higher than underlying
Submitted by 0x52, also found by 0xDecorativePineapple, hyh, Jeiwan, Lambda, and PwnPatrol
Insurance is to protect the user in case the pegged asset drops significantly below the underlying but risk users are required to payout if the pegged asset is worth more than the underlying.
Proof of Concept
if (price1 > price2) {nowPrice = (price2 * 10000) / price1;} else {nowPrice = (price1 * 10000) / price2;}
The above lines calculates the ratio using the lower of the two prices, which means that in the scenario, the pegged asset is worth more than the underlying, a depeg event will be triggered. This is problematic for two reasons. The first is that many pegged assets are designed to maintain at least the value of the underlying. They put very strong incentives to keep the asset from going below the peg but usually use much looser policies to bring the asset down to the peg, since an upward break from the peg is usually considered benign. The second is that when a pegged asset moves above the underlying, the users who are holding the asset are benefiting from the appreciation of the asset; therefore the insurance is not needed.
Because of these two reasons, it is my opinion that sellers would demand a higher premium from buyers as a result of the extra risk introduced by the possibility of having to pay out during an upward depeg. It is also my opinion that these higher premiums would push users seeking insurance to other cheaper products that don’t include this risk.
Recommended Mitigation Steps
The ratio returned should always the ratio of the pegged asset to the underlying (i.e. pegged/underlying).
MiguelBits (Y2K Finance) marked as duplicate and commented:
Duplicate of26.
HickupHH3 (judge) commented:
Not a duplicate.Pegged tokens go both ways: either valued more or less than the asset it’s pegging to (underlying token).The warden is arguing that when the pegged token is worth more than the underlying (eg. worth >$1for a stablecoin), the users are still eligible for a payout, which he argues shouldnt be the case.I agree with the warden; from experience, most projects see it as a positive if their algo stablecoin is worth more than the underlying, and so, wouldn’t do nothing about it. In fact, they’d probably use it as a shilling point to attract more users to mint more of these tokens to help bring the price down. This scenario should not be covered by the insurers.