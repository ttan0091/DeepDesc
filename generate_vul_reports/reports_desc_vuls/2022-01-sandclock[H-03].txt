Type of vulnerability: Flash Loan Attack
Cause of vulnerability: The contract relies on the immediate exchange rate of DAI to UST without considering the impact of large-scale transactions, making it susceptible to manipulation via flash loans.
Execution process: An attacker takes out a flash loan of DAI, exchanges a large amount of DAI for UST, causing the exchange rate to shift in their favor. They then interact with the vault to withdraw or deposit under more favorable terms than the market rate, transfer UST back to DAI, and repay the flash loan.
Vulnerable code: https://github.com/code-423n4/2022-01-sandclock/blob/a90ad3824955327597be00bb0bd183a9c228a4fb/sandclock/contracts/strategy/NonUSTStrategy.sol#L135