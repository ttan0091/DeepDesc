Type of vulnerability: Incentive Misalignment and Lack of Repayment Enforcement
Cause of vulnerability: The design relies on the integrity of the router owner to repay the AAVE portal loan out-of-band, without enforcing the repayment within the contract logic.
Execution process: A router is selected to take on the credit risk for an unbacked position from AAVE portal. If the repayment to AAVE portal fails during reconciliation, the router's balance is credited with the amount instead of being escrowed. The router can then choose to withdraw the funds without repaying the loan, leaving Connext with the debt.
Vulnerable code: `BridgeFacet._reconcileProcessPortal` function where the repayment logic resides, specifically the handling of failed `AssetLogic.swapFromLocalAssetIfNeededForExactOut` and `AavaPool.backUnbacked` calls.