Type of vulnerability: Incorrect Balance Calculation
Cause of vulnerability: The balance calculation does not account for the full amount of tokens held by the contract and its strategies, leading to an under-reporting of the actual balance.
Execution process: When the `balanceOfToken` function is called, it calculates the user's redeemable balance in Badger tokens based on their share of the total supply of Badger Sett tokens. However, it uses the balance of Badger tokens directly held by the Badger Sett contract, which is a small portion of the total deployed capital, leading to an under-reported balance.
Vulnerable code: `balances[addr].mul(badger.balanceOf(address(badgerSett))).div(badgerSett.totalSupply())`