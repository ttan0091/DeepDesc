Type of vulnerability: Reentrancy
Cause of vulnerability: The function `buyBond` transfers tokens from `msg.sender` twice, which can lead to double spending.
Execution process: When `buyBond` is called, it first deposits tokens from `msg.sender` to the fund using `Fund(fund()).depositFor(msg.sender, issuer, amount);`. Then, it collects tokens from `issuer` to `msg.sender` using `collectToken(issuer, msg.sender, amount);`. If `collectToken` is reentrant, it can cause `msg.sender` to spend the same tokens twice.
Vulnerable code: `Fund(fund()).depositFor(msg.sender, issuer, amount);...collectToken(issuer, msg.sender, amount);`